<script>
        const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbwr_vi5RnGrsvkHCEM6SQt63_ThvZ8QH_fv91731LJdFzdCBAcED6jandGo1oOl79hosA/exec';
        const studentId = localStorage.getItem('studentId') || 'Anonymous';

        // 修改 logData 增加 isCorrect 參數
        function logData(action, result, isCorrect) {
            const data = { 
                studentId: studentId, 
                activity: 'Topic Sentence', 
                action: action, 
                result: result,
                isCorrect: isCorrect // 第六欄
            };
            fetch(SCRIPT_URL, {
                method: 'POST', mode: 'no-cors',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(data)
            });
        }

        function checkAnswer(element, isCorrect) {
            const options = document.querySelectorAll('.option-item');
            options.forEach(opt => opt.classList.remove('correct'));
            const answerDisplay = document.getElementById('final-answer');
            const arrow = document.getElementById('arrow');
            
            const userChoice = element.textContent.trim();
            
            // 這裡判斷 Yes 或 No
            if (isCorrect) {
                logData('Select Option', userChoice, 'Yes');
                element.classList.add('correct');
                answerDisplay.textContent = userChoice;
            } else {
                logData('Select Option', userChoice, 'No');
                answerDisplay.textContent = "";
                arrow.style.display = 'none';
                alert("Try again!");
            }
        }

        function goToNextPage() {
            const answerDisplay = document.getElementById('final-answer');
            if (answerDisplay.textContent !== "") {
                logData('Navigation', 'Go to Sentence Structure', 'N/A');
                window.location.href = "sentence_structure.html"; 
            } else {
                alert("Please select the correct topic sentence first.");
            }
        }
    </script>
