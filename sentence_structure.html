<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sentence Structure Analysis</title>
    <style>
        /* --- 1. 字體設定 --- */
        @font-face {
            font-family: 'Century Gothic';
            src: url('centurygothic.ttf') format('truetype');
            font-weight: normal;
            font-style: normal;
        }
        @font-face {
            font-family: 'Century Gothic';
            src: url('centurygothic_bold.ttf') format('truetype');
            font-weight: bold;
            font-style: normal;
        }

        body {
            font-family: 'Century Gothic', sans-serif;
            background-color: #fff;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            user-select: none;
        }

        .main-container {
            width: 100%;
            max-width: 1100px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        /* --- 2. 句子互動區域 --- */
        .sentence-display {
            font-size: 90px; /* 超大字體 */
            font-weight: bold;
            margin-top: 20px;
            margin-bottom: 30px;
            line-height: 1.6;
            cursor: default;
        }

        /* 互動元件的基本樣式 */
        .interactive-span {
            display: inline-block;
            padding: 5px 2px;
            border-radius: 4px;
            transition: all 0.3s ease;
            position: relative;
        }

        /* 提示狀態：當前任務目標滑鼠移上去會變色 */
        .interactive-span.active-target {
            cursor: pointer;
        }
        .interactive-span.active-target:hover {
            background-color: #eef9ff;
        }

        /* --- 完成後的標記樣式 (對應截圖) --- */
        
        /* 藍色方框 (Capital Letter & Punctuation) */
        .blue-box {
            border: 5px solid #0070c0;
            padding: 0 5px;
            margin: 0 2px;
        }

        /* 黑色底線 (Who part) */
        .black-underline {
            border-bottom: 8px solid black;
            border-radius: 0;
        }

        /* 黑色橢圓圈 (Predicate part) */
        .black-oval {
            border: 5px solid black;
            border-radius: 50% / 100%; /* 橢圓形 */
            padding: 5px 25px; /* 左右加寬讓圈圈好看 */
            margin: 0 10px;
        }

        /* --- 3. 下方內容區 (圖 + 規則) --- */
        .content-area {
            display: flex;
            width: 100%;
            justify-content: center;
            align-items: flex-start;
            gap: 50px;
        }

        /* 左側圖片 */
        .image-box {
            width: 400px;
            height: 300px;
            border: 2px solid #eee;
            background-color: #f9f9f9;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .image-box img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        /* 右側規則文字 */
        .rules-container {
            flex: 1;
            max-width: 550px;
            opacity: 0.2; /* 預設變淡，引起注意上方句子 */
            transition: opacity 0.5s;
        }

        .rules-header {
            color: #0070c0; /* 藍色標題 */
            font-size: 36px;
            font-weight: bold;
            margin-bottom: 20px;
        }

        .rules-list {
            list-style: none;
            padding: 0;
        }

        .rules-list li {
            font-size: 28px;
            color: #000;
            font-weight: bold;
            margin-bottom: 15px;
            display: flex;
            align-items: flex-start;
        }

        .rules-list li::before {
            content: "•";
            color: #000;
            font-weight: bold;
            display: inline-block; 
            width: 1em;
            margin-left: -1em;
        }

        /* 強調關鍵字 (Italics / Bold in screenshot) */
        .emphasis {
            font-style: italic;
            font-weight: bold;
        }

        /* --- 4. 底部指令條 (Wizard) --- */
        .instruction-bar {
            position: fixed;
            bottom: 30px;
            background-color: #fff9c4; /* 淺黃色背景 */
            border: 3px solid #fbc02d;
            padding: 15px 40px;
            border-radius: 50px;
            font-size: 24px;
            font-weight: bold;
            color: #333;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
            z-index: 100;
            animation: bounceIn 0.6s;
        }

        @keyframes bounceIn {
            0% { transform: scale(0.5); opacity: 0; }
            60% { transform: scale(1.1); opacity: 1; }
            100% { transform: scale(1); }
        }

    </style>
</head>
<body>

    <div class="main-container">
        
        <div class="sentence-display">
            <span id="who-part" class="interactive-span" onclick="handleClick('who')">
                <span id="cap-part" class="interactive-span" onclick="event.stopPropagation(); handleClick('cap')">T</span>he boy
            </span>
            
            &nbsp; <span id="more-part" class="interactive-span" onclick="handleClick('more')">wears a hat</span><span id="punc-part" class="interactive-span" onclick="handleClick('punc')">.</span>
        </div>

        <div class="content-area">
            <div class="image-box">
                <img src="boy_walking.jpg" alt="Boy Walking Illustration" onerror="this.style.display='none'; this.parentNode.innerText='[Image: boy_walking.jpg]'">
            </div>

            <div class="rules-container" id="rules-area">
                <div class="rules-header">This is a complete sentence.</div>
                <ul class="rules-list">
                    <li>It makes sense - tells <span class="emphasis">who</span> and tells more.</li>
                    <li>It begins with a capital letter.</li>
                    <li>There are spaces between the words.</li>
                    <li>It ends with punctuation.</li>
                </ul>
            </div>
        </div>

    </div>

    <div class="instruction-bar" id="msg-bar">
        Step 1: Touch the capital letter.
    </div>

    <script>
        // 狀態變數：控制目前進行到第幾步
        let step = 1;

        // 取得元素
        const capPart = document.getElementById('cap-part');
        const puncPart = document.getElementById('punc-part');
        const whoPart = document.getElementById('who-part');
        const morePart = document.getElementById('more-part');
        const msgBar = document.getElementById('msg-bar');
        const rulesArea = document.getElementById('rules-area');

        // 初始化：設定第一個目標為活躍狀態
        capPart.classList.add('active-target');

        function handleClick(clickedType) {
            
            // --- 步驟 1: 點擊大寫字母 (Capital Letter) ---
            if (step === 1 && clickedType === 'cap') {
                capPart.classList.add('blue-box'); // 加藍框
                capPart.classList.remove('active-target'); // 移除活躍狀態
                
                // 前進下一步
                step = 2;
                msgBar.innerText = "Step 2: Touch the punctuation at the end.";
                msgBar.style.backgroundColor = "#e1f5fe"; // 換個顏色提示變化
                puncPart.classList.add('active-target');
            }

            // --- 步驟 2: 點擊標點符號 (Punctuation) ---
            else if (step === 2 && clickedType === 'punc') {
                puncPart.classList.add('blue-box');
                puncPart.classList.remove('active-target');

                step = 3;
                msgBar.innerText = "Step 3: Underline the naming part (Who).";
                msgBar.style.backgroundColor = "#fff9c4";
                whoPart.classList.add('active-target');
            }

            // --- 步驟 3: 點擊主詞 (Who part) ---
            else if (step === 3 && clickedType === 'who') {
                whoPart.classList.add('black-underline');
                whoPart.classList.remove('active-target');

                step = 4;
                msgBar.innerText = "Step 4: Circle the telling part (Tells more).";
                msgBar.style.backgroundColor = "#e1f5fe";
                morePart.classList.add('active-target');
            }

            // --- 步驟 4: 點擊動詞片語 (Tells more part) ---
            else if (step === 4 && clickedType === 'more') {
                morePart.classList.add('black-oval');
                morePart.classList.remove('active-target');

                // 完成所有步驟
                step = 5;
                finishActivity();
            }
        }

        function finishActivity() {
            // 1. 顯示成功訊息
            msgBar.innerText = "Great job! You analyzed the sentence!";
            msgBar.style.backgroundColor = "#b9f6ca"; // 成功綠色
            msgBar.style.color = "#00600f";

            // 2. 亮起右側規則文字
            rulesArea.style.opacity = "1";
        }

    </script>
</body>
</html>
